<div class="container">
<h2>Name: <%= @medium.name %></h2>
<h4>URL: <a href='<%= @medium.url %>' target=_blank><%= @medium.url %></a></h4>
<h4>Details: <%= @medium.description %></h4>
<h4>Type: <%= @medium_type %></h4>

<% if @medium.url.present? %>
  <% if not @preview.blank? %>
    <a class="fragment" href="<%= @medium.url %>">
    <% if defined?(@preview.images.first.src) then %>
        <img src ='<%= @preview.images.first.src %>' width=50 />
    <% end %>
    <h3><%= @preview.title %></h3>
    <p class="text">
        <%= @preview.description %>
    </p>
    </a>
  <% end %>
<% end %>

<p>Added by: <%= User.find(@medium.user_id).name %>
<br>Created: <%= @medium.created_at %>
<br>Updated: <%= @medium.updated_at %></p>

<br><br>
<h5>
  <%
    @reviews = MediumReview.where("medium_id="+@medium.id.to_s+" AND (medium_review_sharing_mode=1 OR user_id="+current_user.id.to_s+")")
    if (@reviews.blank?) then @total_reviews=0 else @total_reviews=@reviews.size end %>
 <% if (@total_reviews>0) %>
    <%  @my_review = MediumReview.where(medium_id: @medium.id, user_id: current_user.id)
      if (@my_review.blank?) %>
         Check the <%= link_to " reviews of this medium", medium_medium_reviews_path(@medium.id) %><br><br>
         <%= link_to "Review this medium", medium_medium_reviews_path(@medium.id), method: :create %>
     <% else %>
         <%= link_to "Edit your review of this medium", medium_medium_reviews_path(@medium.id), method: :create %> |
         <%= link_to "Delete your review of this medium", medium_medium_review_path(@medium.id,@my_review), method: :delete, data: { confirm: "Are you sure?"} %>
         <% if @total_reviews>1 %>
            Check the <%= link_to "other reviews of this medium", medium_medium_reviews_path(@medium.id) %><br>
        <% end %>
    <% end %>
 <% else %>
       <%= link_to "Review this medium", medium_medium_reviews_path(@medium.id), method: :create %>
 <% end %>

</h5>
<br><br>

<%= link_to "Back", media_path %>

<% if user_signed_in? %>
  <% if @medium.user_id == current_user.id %> -
    <%= link_to "Edit", edit_medium_path(@medium) %> -
    <%= link_to "Delete", medium_path(@medium), method: :delete, data: { confirm: @warning_msg} %>
  <% end %>
<% end %>
</div>
